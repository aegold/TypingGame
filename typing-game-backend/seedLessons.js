const mongoose = require("mongoose");
const Lesson = require("./models/lesson");
const Category = require("./models/category");
const dotenv = require("dotenv");

// Load environment variables
dotenv.config();

// Connect to MongoDB using the same URI as the main app
mongoose.connect(process.env.MONGODB_URI, {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});

const seedData = async () => {
  try {
    console.log("üóëÔ∏è X√≥a t·∫•t c·∫£ lessons v√† categories c≈©...");

    // X√≥a t·∫•t c·∫£ lessons v√† categories c≈©
    await Lesson.deleteMany({});
    await Category.deleteMany({});

    console.log("‚úÖ ƒê√£ x√≥a d·ªØ li·ªáu c≈©");

    // T·∫°o categories m·ªõi
    console.log("üìÇ T·∫°o categories m·ªõi...");

    const categories = await Category.insertMany([
      {
        name: "C∆° b·∫£n",
        description: "C√°c b√†i h·ªçc c∆° b·∫£n cho ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu",
        order: 1,
      },
      {
        name: "T·ª´ v·ª±ng",
        description: "Luy·ªán t·∫≠p g√µ t·ª´ ti·∫øng Anh",
        order: 2,
      },
      {
        name: "ƒêo·∫°n vƒÉn",
        description: "Luy·ªán t·∫≠p g√µ ƒëo·∫°n vƒÉn ho√†n ch·ªânh",
        order: 3,
      },
      {
        name: "Ti·∫øng Vi·ªát",
        description: "Luy·ªán t·∫≠p g√µ Telex ti·∫øng Vi·ªát",
        order: 4,
      },
    ]);

    const basicCategory = categories[0]._id;
    const wordCategory = categories[1]._id;
    const paragraphCategory = categories[2]._id;
    const vietnameseCategory = categories[3]._id;

    console.log("üìö T·∫°o lessons m·ªõi...");

    // Letter Typing Lessons
    const letterLessons = [
      {
        title: "B√†i 1: Ph√≠m c∆° b·∫£n (F, J)",
        gameType: "letterTyper",
        words: [
          ["f", " ", "f", " ", "f"], // Level 1: Luy·ªán ph√≠m F v√† Space
          ["j", " ", "j", " ", "j"], // Level 2: Luy·ªán ph√≠m J v√† Space
          ["f", "j", " ", "f", "j"], // Level 3: K·∫øt h·ª£p F, J v√† Space
          ["d", " ", "d", " ", "d"], // Level 4: Luy·ªán ph√≠m D v√† Space
          ["k", " ", "k", " ", "k"], // Level 5: Luy·ªán ph√≠m K v√† Space
          ["f", "d", "j", "k", " ", "f", "d", "j", "k"], // Level 6: K·∫øt h·ª£p t·∫•t c·∫£
        ],
        timer: 60,
        category: basicCategory,
        order: 1,
      },
      {
        title: "B√†i 2: M·ªü r·ªông (D, K)",
        gameType: "letterTyper",
        words: [
          ["d", " ", "d", " ", "d"], // Level 1: Luy·ªán ph√≠m D
          ["k", " ", "k", " ", "k"], // Level 2: Luy·ªán ph√≠m K
          ["f", "d", " ", "f", "d"], // Level 3: K·∫øt h·ª£p F v√† D
          ["j", "k", " ", "j", "k"], // Level 4: K·∫øt h·ª£p J v√† K
          ["f", "d", "j", "k", " "], // Level 5: K·∫øt h·ª£p t·∫•t c·∫£ 4 ph√≠m
          ["d", "f", "k", "j", "d", "f", "k", "j"], // Level 6: Luy·ªán t·ªëc ƒë·ªô
        ],
        timer: 90,
        category: basicCategory,
        order: 2,
      },
      {
        title: "B√†i 3: H√†ng gi·ªØa (A, S, L, ;)",
        gameType: "letterTyper",
        words: [
          ["a", " ", "a", " ", "a"], // Level 1: Luy·ªán ph√≠m A
          ["s", " ", "s", " ", "s"], // Level 2: Luy·ªán ph√≠m S
          ["l", " ", "l", " ", "l"], // Level 3: Luy·ªán ph√≠m L
          [";", " ", ";", " ", ";"], // Level 4: Luy·ªán ph√≠m ;
          ["a", "s", " ", "l", ";"], // Level 5: K·∫øt h·ª£p tay tr√°i v√† ph·∫£i
          ["a", "s", "d", "f", "j", "k", "l", ";"], // Level 6: H√†ng gi·ªØa ho√†n ch·ªânh
          ["f", "d", "s", "a", ";", "l", "k", "j"], // Level 7: Luy·ªán ng∆∞·ª£c
          ["a", "f", "j", ";", "s", "d", "k", "l"], // Level 8: Luy·ªán ch√©o
        ],
        timer: 120,
        category: basicCategory,
        order: 3,
      },
      {
        title: "B√†i 4: H√†ng tr√™n (Q, W, E, R, T, Y, U, I, O, P)",
        gameType: "letterTyper",
        words: [
          ["q", " ", "q", " ", "q"], // Level 1: Luy·ªán ph√≠m Q
          ["w", " ", "w", " ", "w"], // Level 2: Luy·ªán ph√≠m W
          ["e", " ", "e", " ", "e"], // Level 3: Luy·ªán ph√≠m E
          ["r", " ", "r", " ", "r"], // Level 4: Luy·ªán ph√≠m R
          ["t", " ", "t", " ", "t"], // Level 5: Luy·ªán ph√≠m T
          ["q", "w", "e", "r", "t"], // Level 6: K·∫øt h·ª£p tay tr√°i
          ["y", "u", "i", "o", "p"], // Level 7: K·∫øt h·ª£p tay ph·∫£i
          ["q", "w", "e", "r", "t", "y", "u", "i", "o", "p"], // Level 8: H√†ng tr√™n ho√†n ch·ªânh
        ],
        timer: 150,
        category: basicCategory,
        order: 4,
      },
      {
        title: "B√†i 5: H√†ng d∆∞·ªõi (Z, X, C, V, B, N, M)",
        gameType: "letterTyper",
        words: [
          ["z", " ", "z", " ", "z"], // Level 1: Luy·ªán ph√≠m Z
          ["x", " ", "x", " ", "x"], // Level 2: Luy·ªán ph√≠m X
          ["c", " ", "c", " ", "c"], // Level 3: Luy·ªán ph√≠m C
          ["v", " ", "v", " ", "v"], // Level 4: Luy·ªán ph√≠m V
          ["b", " ", "b", " ", "b"], // Level 5: Luy·ªán ph√≠m B
          ["z", "x", "c", "v", "b"], // Level 6: K·∫øt h·ª£p tay tr√°i
          ["n", "m", " ", "n", "m"], // Level 7: K·∫øt h·ª£p tay ph·∫£i
          ["z", "x", "c", "v", "b", "n", "m"], // Level 8: H√†ng d∆∞·ªõi ho√†n ch·ªânh
        ],
        timer: 150,
        category: basicCategory,
        order: 5,
      },
      {
        title: "B√†i 6: T·ªïng h·ª£p t·∫•t c·∫£ c√°c ph√≠m",
        gameType: "letterTyper",
        words: [
          ["a", "s", "d", "f", "j", "k", "l", ";"], // Level 1: H√†ng gi·ªØa
          ["q", "w", "e", "r", "t", "y", "u", "i", "o", "p"], // Level 2: H√†ng tr√™n
          ["z", "x", "c", "v", "b", "n", "m"], // Level 3: H√†ng d∆∞·ªõi
          ["f", "r", "u", "j", "r", "f"], // Level 4: Luy·ªán ch√©o 3 h√†ng
          ["a", "q", "z", ";", "p", "m"], // Level 5: Luy·ªán c·ªôt ngo√†i
          ["s", "w", "x", "l", "o", "n"], // Level 6: Luy·ªán c·ªôt trong
          ["d", "e", "c", "k", "i", "b"], // Level 7: Luy·ªán c·ªôt gi·ªØa
          ["f", "t", "v", "j", "y", "m", "r", "u"], // Level 8: Th·ª≠ th√°ch cu·ªëi
        ],
        timer: 180,
        category: basicCategory,
        order: 6,
      },
    ];

    // Word Typing Lessons
    const wordLessons = [
      {
        title: "T·ª´ ƒë∆°n gi·∫£n",
        gameType: "wordTyper",
        words: [
          "the",
          "and",
          "you",
          "that",
          "was",
          "for",
          "are",
          "with",
          "his",
          "they",
        ],
        timer: 120,
        category: wordCategory,
        order: 1,
      },
      {
        title: "T·ª´ trung b√¨nh",
        gameType: "wordTyper",
        words: [
          "computer",
          "keyboard",
          "typing",
          "practice",
          "lesson",
          "student",
          "teacher",
          "school",
        ],
        timer: 150,
        category: wordCategory,
        order: 2,
      },
    ];

    // Paragraph Typing Lessons
    const paragraphLessons = [
      {
        title: "ƒêo·∫°n vƒÉn ng·∫Øn",
        gameType: "paragraphTyper",
        words: [
          "The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet.",
        ],
        timer: 180,
        category: paragraphCategory,
        order: 1,
      },
      {
        title: "ƒêo·∫°n vƒÉn v·ªÅ c√¥ng ngh·ªá",
        gameType: "paragraphTyper",
        words: [
          "Technology has revolutionized the way we communicate and work. From smartphones to artificial intelligence, innovation continues to shape our daily lives.",
        ],
        timer: 240,
        category: paragraphCategory,
        order: 2,
      },
    ];

    // Vietnamese Letter Typing Lessons
    const vietnameseLessons = [
      {
        title: "D·∫•u huy·ªÅn (f)",
        gameType: "vietnameseLetterTyper",
        words: ["√†", "√®", "√¨", "√≤", "√π", "·ª≥"],
        timer: 120,
        category: vietnameseCategory,
        order: 1,
      },
      {
        title: "D·∫•u s·∫Øc (s)",
        gameType: "vietnameseLetterTyper",
        words: ["√°", "√©", "√≠", "√≥", "√∫", "√Ω"],
        timer: 120,
        category: vietnameseCategory,
        order: 2,
      },
      {
        title: "D·∫•u h·ªèi (r)",
        gameType: "vietnameseLetterTyper",
        words: ["·∫£", "·∫ª", "·ªâ", "·ªè", "·ªß", "·ª∑"],
        timer: 120,
        category: vietnameseCategory,
        order: 3,
      },
      {
        title: "D·∫•u ng√£ (x)",
        gameType: "vietnameseLetterTyper",
        words: ["√£", "·∫Ω", "ƒ©", "√µ", "≈©", "·ªπ"],
        timer: 120,
        category: vietnameseCategory,
        order: 4,
      },
      {
        title: "D·∫•u n·∫∑ng (j)",
        gameType: "vietnameseLetterTyper",
        words: ["·∫°", "·∫π", "·ªã", "·ªç", "·ª•", "·ªµ"],
        timer: 120,
        category: vietnameseCategory,
        order: 5,
      },
      {
        title: "Nguy√™n √¢m ƒë·∫∑c bi·ªát",
        gameType: "vietnameseLetterTyper",
        words: ["√¢", "ƒÉ", "√™", "√¥", "∆°", "∆∞", "ƒë"],
        timer: 150,
        category: vietnameseCategory,
        order: 6,
      },
      {
        title: "T·ªïng h·ª£p √¢ + d·∫•u",
        gameType: "vietnameseLetterTyper",
        words: ["·∫•", "·∫ß", "·∫©", "·∫´", "·∫≠"],
        timer: 150,
        category: vietnameseCategory,
        order: 7,
      },
      {
        title: "T·ªïng h·ª£p ƒÉ + d·∫•u",
        gameType: "vietnameseLetterTyper",
        words: ["·∫Ø", "·∫±", "·∫≥", "·∫µ", "·∫∑"],
        timer: 150,
        category: vietnameseCategory,
        order: 8,
      },
      {
        title: "T·ªïng h·ª£p √™ + d·∫•u",
        gameType: "vietnameseLetterTyper",
        words: ["·∫ø", "·ªÅ", "·ªÉ", "·ªÖ", "·ªá"],
        timer: 150,
        category: vietnameseCategory,
        order: 9,
      },
      {
        title: "T·ªïng h·ª£p √¥ + d·∫•u",
        gameType: "vietnameseLetterTyper",
        words: ["·ªë", "·ªì", "·ªï", "·ªó", "·ªô"],
        timer: 150,
        category: vietnameseCategory,
        order: 10,
      },
      {
        title: "T·ªïng h·ª£p ∆° + d·∫•u",
        gameType: "vietnameseLetterTyper",
        words: ["·ªõ", "·ªù", "·ªü", "·ª°", "·ª£"],
        timer: 150,
        category: vietnameseCategory,
        order: 11,
      },
      {
        title: "T·ªïng h·ª£p ∆∞ + d·∫•u",
        gameType: "vietnameseLetterTyper",
        words: ["·ª©", "·ª´", "·ª≠", "·ªØ", "·ª±"],
        timer: 150,
        category: vietnameseCategory,
        order: 12,
      },
      {
        title: "Th·ª≠ th√°ch to√†n di·ªán",
        gameType: "vietnameseLetterTyper",
        words: ["√°", "·∫ß", "·∫≥", "·ªÖ", "·ªã", "·ªë", "·ª´", "·ª£", "ƒë"],
        timer: 200,
        category: vietnameseCategory,
        order: 13,
      },
    ];

    // Insert all lessons
    const allLessons = [
      ...letterLessons,
      ...wordLessons,
      ...paragraphLessons,
      ...vietnameseLessons,
    ];

    await Lesson.insertMany(allLessons);

    console.log("‚úÖ ƒê√£ t·∫°o th√†nh c√¥ng:");
    console.log(`üìÇ ${categories.length} categories`);
    console.log(`üìö ${allLessons.length} lessons`);
    console.log("   - Letter typing: " + letterLessons.length);
    console.log("   - Word typing: " + wordLessons.length);
    console.log("   - Paragraph typing: " + paragraphLessons.length);
    console.log("   - Vietnamese typing: " + vietnameseLessons.length);

    console.log("\nüéØ Vietnamese lessons created:");
    vietnameseLessons.forEach((lesson) => {
      console.log(
        `   ${lesson.order}. ${lesson.title} - ${lesson.words.length} k√Ω t·ª±`
      );
    });
  } catch (error) {
    console.error("‚ùå L·ªói khi seed data:", error);
  } finally {
    mongoose.connection.close();
    console.log("\nüîå ƒê√£ ƒë√≥ng k·∫øt n·ªëi database");
  }
};

seedData();
